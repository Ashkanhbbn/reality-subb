# Iran Hyper-Stealth Config (v12) - GOD MODE
# Updated: 2025-06-28 | Tested on: Irancell, MCI, Rightel

meta:
  strategy: "quantum_bypass"
  threat_level: "iran_extreme"
  update_key: "0xIRANBYPASS2025"

# Ù„Ø§ÛŒÙ‡ Û±: Ù¾Ø±ÙˆØªÚ©Ù„â€ŒÙ‡Ø§ÛŒ ØªØ±Ú©ÛŒØ¨ÛŒ (Ø§ÛŒØ±Ø§Ù†-Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø´Ø¯Ù‡)
proxies:
  # Reality (Ø§ÛŒØ±Ø§Ù†-Ø³Ø§Ø²Ú¯Ø§Ø±)
  - name: "REALITY-IR-01"
    type: vless
    server: edge.snappfood.ir  # CDN Ø¯Ø§Ø®Ù„ÛŒ Ø¨Ø±Ø§ÛŒ Ø§Ø³ØªØªØ§Ø±
    port: 443
    uuid: YOUR_UUID_HERE  # Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ† Ø¨Ø§ UUID ÙˆØ§Ù‚Ø¹ÛŒ
    flow: xtls-rprx-vision
    tls: true
    servername: www.digikala.com  # Ø¯Ø§Ù…Ù†Ù‡ Ø§ÛŒØ±Ø§Ù†ÛŒ Ù…Ø¹ØªØ¨Ø±
    reality-opts:
      public-key: YOUR_PUBLIC_KEY_HERE  # Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ† Ø¨Ø§ Ú©Ù„ÛŒØ¯ ÙˆØ§Ù‚Ø¹ÛŒ
      short-id: "7d4a"  # Ú©ÙˆØªØ§Ù‡ Ø¨Ø±Ø§ÛŒ Ú©Ø§Ù‡Ø´ Ø±Ø¯Ù¾Ø§
      spider-x: "/static/img"  # Ù…Ø³ÛŒØ±Ù‡Ø§ÛŒ Ø±Ø§ÛŒØ¬ Ø§ÛŒØ±Ø§Ù†ÛŒ
    client-fingerprint: edge  # Ø§Ø«Ø±Ø§Ù†Ú¯Ø´Øª Ù…Ø±ÙˆØ±Ú¯Ø± Ø±Ø§ÛŒØ¬ Ø¯Ø± Ø§ÛŒØ±Ø§Ù†
    udp: true

  # Trojan (Ø¨Ø§ Ø§Ø³ØªØªØ§Ø± CDN Ø¯Ø§Ø®Ù„ÛŒ)
  - name: "TROJAN-IR-01"
    type: trojan
    server: cdn.anetwork.ir  # CDN Ø§ÛŒØ±Ø§Ù†ÛŒ
    port: 443
    password: "YOUR_STRONG_PASSWORD"
    sni: www.torob.com  # Ø¯Ø§Ù…Ù†Ù‡ Ø§ÛŒØ±Ø§Ù†ÛŒ
    alpn: ["http/1.1"]
    skip-cert-verify: false
    udp: true

  # VMess (WebSocket + TLS)
  - name: "VMESS-IR-WS"
    type: vmess
    server: dl.gamesly.ir  # CDN Ø¨Ø§Ø²ÛŒ Ø§ÛŒØ±Ø§Ù†ÛŒ
    port: 443
    uuid: YOUR_UUID_HERE
    alterId: 0
    cipher: aes-128-gcm
    tls: true
    network: ws
    ws-opts:
      path: "/api/v1/stream"  # Ù…Ø³ÛŒØ± Ø§Ø³ØªØªØ§Ø± Ø´Ø¯Ù‡
      headers:
        Host: dl.gamesly.ir

  # Shadowsocks (ÙÙˆÙ‚â€ŒØ³Ø±ÛŒØ¹ Ø¨Ø§ Ø§Ø³ØªØªØ§Ø±)
  - name: "SS-IR-OBFUS"
    type: ss
    server: download.ir  # Ø¯Ø§Ù…Ù†Ù‡ Ø§ÛŒØ±Ø§Ù†ÛŒ
    port: 443
    cipher: aes-256-gcm
    password: "YOUR_STRONG_PASSWORD"
    plugin: v2ray-plugin
    plugin-opts:
      mode: websocket
      host: "download.ir"
      tls: true
      path: "/download"

  # Hysteria2 (Ø¨Ø±Ø§ÛŒ Ø´Ø¨Ú©Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨Ø§ Ø§ÙØª Ø´Ø¯ÛŒØ¯)
  - name: "HY2-IR-UDP"
    type: hysteria2
    server: game.iranapps.ir  # Ø¯Ø§Ù…Ù†Ù‡ Ø§Ù¾Ù„ÛŒÚ©ÛŒØ´Ù† Ø§ÛŒØ±Ø§Ù†ÛŒ
    port: 443
    password: "YOUR_HYSTERIA_PASSWORD"
    obfs: salamander
    obfs-password: "YOUR_OBFS_PASS"
    sni: dl.iranlms.ir  # Ø§Ø³ØªØªØ§Ø± Ø¢Ù…ÙˆØ²Ø´ Ø§ÛŒØ±Ø§Ù†ÛŒ

  # Ø³ÛŒØ³ØªÙ… Ù¾Ø´ØªÛŒØ¨Ø§Ù† Ø§Ø¶Ø·Ø±Ø§Ø±ÛŒ (Ø§ÛŒØ±Ø§Ù†-ÙˆÛŒÚ˜Ù‡) - Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯Ù‡ Ø¯Ø± Ø§Ù†ØªÙ‡Ø§ÛŒ Ù„ÛŒØ³Øª Ù¾Ø±ÙˆÚ©Ø³ÛŒâ€ŒÙ‡Ø§
  - name: "ðŸš¨ EMERGENCY-IR"
    type: vmess
    server: "cdn.jabama.ir"  # CDN Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ† Ø§ÛŒØ±Ø§Ù†ÛŒ
    port: 443
    uuid: "EMERGENCY_UUID"  # Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ† Ø¨Ø§ UUID Ø§Ø¶Ø·Ø±Ø§Ø±ÛŒ
    alterId: 0
    cipher: "none"
    tls: true
    network: "tcp"
    ws-opts:
      path: "/"
      headers:
        Host: "jabama.ir"
    client-fingerprint: "edge"
    reality-opts:  # Ø§Ú¯Ø± Ø§Ø² Reality Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒØ¯ØŒ Ø§ÛŒÙ† Ø¨Ø®Ø´ Ø±Ø§ ÙØ¹Ø§Ù„ Ú©Ù†ÛŒØ¯
      public-key: "EMERGENCY_PUB_KEY"  # Ú©Ù„ÛŒØ¯ Ø¹Ù…ÙˆÙ…ÛŒ Ø§Ø¶Ø·Ø±Ø§Ø±ÛŒ
      short-id: "8c5d"
      spider-x: "/images"

# Ù„Ø§ÛŒÙ‡ Û²: DNS Ù¾ÙˆÛŒØ§ (Ø§ÛŒØ±Ø§Ù†-Ø¨Ù‡ÛŒÙ†Ù‡)
dns:
  enable: true
  listen: 0.0.0.0:5353
  enhanced-mode: redir-host
  fake-ip-range: 198.18.0.1/16
  use-hosts: true
  nameserver:
    - "https://shecan.ir/dns-query"  # DNS Ø§ÛŒØ±Ø§Ù†ÛŒ Ø¶Ø¯ ÙÛŒÙ„ØªØ±
    - "https://dns.403.online/dns-query"  # DNS Ø¶Ø¯ ÙÛŒÙ„ØªØ±
    - "https://dns.google/dns-query#ipv4"
  fallback:
    - "tls://dns11.quad9.net:853"
    - "https://doh.opendns.com/dns-query?dns=QlVBTg"
  fallback-filter:
    geoip: true
    geoip-code: IR
    ipcidr:
      - 0.0.0.0/8
      - 10.0.0.0/8
      - 172.16.0.0/12
      - 127.0.0.0/8
    domain:
      - "+.ir"
      - "+.filter"

# Ù„Ø§ÛŒÙ‡ Û³: Ú¯Ø±ÙˆÙ‡â€ŒÙ‡Ø§ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯ (Ù…Ø³ÛŒØ±ÛŒØ§Ø¨ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡)
proxy-groups:
  - name: "ðŸš€ IR-AUTO"
    type: url-test
    url: "http://www.digikala.com/healthcheck"  # ØªØ³Øª Ø¨Ø§ Ø¯Ø§Ù…Ù†Ù‡ Ø§ÛŒØ±Ø§Ù†ÛŒ
    interval: 300
    tolerance: 100
    proxies:
      - REALITY-IR-01
      - TROJAN-IR-01
      - VMESS-IR-WS
      - SS-IR-OBFUS
      - HY2-IR-UDP
      - "ðŸš¨ EMERGENCY-IR"  # Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ù¾Ø±ÙˆÚ©Ø³ÛŒ Ø§Ø¶Ø·Ø±Ø§Ø±ÛŒ Ø¨Ù‡ Ú¯Ø±ÙˆÙ‡

  - name: "ðŸ”’ FAILSAFE-IR"
    type: fallback
    url: "http://cdn.snapp.ir/status"  # ØªØ³Øª Ø¨Ø§ CDN Ø§ÛŒØ±Ø§Ù†ÛŒ
    interval: 120
    proxies:
      - "ðŸš€ IR-AUTO"
      - DIRECT

# Ù„Ø§ÛŒÙ‡ Û´: Ù‚ÙˆØ§Ù†ÛŒÙ† Ù‡ÙˆØ´Ù…Ù†Ø¯ (Ø§ÛŒØ±Ø§Ù†-ÙˆÛŒÚ˜Ù‡)
rules:
  # Ø­Ø°Ù ØªØ±Ø§ÙÛŒÚ© Ù†Ø¸Ø§Ø±ØªÛŒ
  - DOMAIN-KEYWORD,snitch,REJECT
  - DOMAIN-SUFFIX,ircert.ir,REJECT
  - DOMAIN-SUFFIX,filter,REJECT
  
  # Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ÛŒ Ø­ÛŒØ§ØªÛŒ Ø§ÛŒØ±Ø§Ù†ÛŒ
  - DOMAIN-SUFFIX,snapp.ir,DIRECT
  - DOMAIN-SUFFIX,digikala.com,DIRECT
  - DOMAIN-SUFFIX,sheypoor.com,DIRECT
  
  # ØªØ±Ø§ÙÛŒÚ© Ø¯Ø§Ø®Ù„ÛŒ
  - DOMAIN-SUFFIX,ir,DIRECT
  - GEOIP,IR,DIRECT
  - IP-CIDR,10.0.0.0/8,DIRECT
  - IP-CIDR,192.168.0.0/16,DIRECT
  
  # Ù¾Ù„ØªÙØ±Ù…â€ŒÙ‡Ø§ÛŒ Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ
  - DOMAIN-SUFFIX,instagram.com,ðŸš€ IR-AUTO
  - DOMAIN-SUFFIX,whatsapp.net,ðŸš€ IR-AUTO
  - DOMAIN-SUFFIX,telegram.org,ðŸš€ IR-AUTO
  
  # Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ÛŒ Ø¬Ù‡Ø§Ù†ÛŒ
  - DOMAIN-SUFFIX,google.com,ðŸš€ IR-AUTO
  - DOMAIN-SUFFIX,cloudflare.com,ðŸš€ IR-AUTO
  - DOMAIN-SUFFIX,akamai.net,ðŸš€ IR-AUTO
  
  # Ù‚Ø§Ù†ÙˆÙ† Ù†Ù‡Ø§ÛŒÛŒ
  - MATCH,ðŸ”’ FAILSAFE-IR

# Ù„Ø§ÛŒÙ‡ Ûµ: Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø´Ø¨Ú©Ù‡ (Ø§ÛŒØ±Ø§Ù†-ÙˆÛŒÚ˜Ù‡)
tun:
  enable: true
  stack: system
  dns-hijack: ["any:53"]
  mtu: 1400  # Ø¨Ù‡ÛŒÙ†Ù‡ Ø¨Ø±Ø§ÛŒ Ø´Ø¨Ú©Ù‡ Ø§ÛŒØ±Ø§Ù†
  auto-route: true
  auto-detect-interface: true

# Ù„Ø§ÛŒÙ‡ Û¶: ØªÚ©Ù†ÛŒÚ©â€ŒÙ‡Ø§ÛŒ Ø¶Ø¯ DPI (Ù¾ÛŒØ´Ø±ÙØªÙ‡)
experimental:
  tcp-fast-open: true
  udp-fragment: true
  sniff-tls-sni: true
  proxy-protocol: 2
  tcp-keep-alive-interval: 10

# Ù„Ø§ÛŒÙ‡ Û·: Ø³ÛŒØ³ØªÙ… Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø±
auto-update:
  enable: true
  url: "https://raw.githubusercontent.com/yourusername/reality-subb/main/reality.yaml"
  interval: 21600  # Ù‡Ø± Û¶ Ø³Ø§Ø¹Øª
  proxy: DIRECT

# Ù„Ø§ÛŒÙ‡ Û¸: Ù…Ú©Ø§Ù†ÛŒØ²Ù… Ú†Ø±Ø®Ø´ÛŒ (Ø¶Ø¯ Ø¨Ù„ÙˆÚ©Ù‡ Ø´Ø¯Ù†)
rotation:
  enable: true
  interval: 3600  # ØªØºÛŒÛŒØ± Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Ù‡Ø± Û± Ø³Ø§Ø¹Øª
  strategy: "domain-shuffle"
  pool:
    - "www.alibaba.ir"
    - "cdn.snapp.ir"
    - "dl.digikala.com"

# Ù„Ø§ÛŒÙ‡ Û¹: Ø³ÛŒØ³ØªÙ… Ù‡Ø´Ø¯Ø§Ø± Ø§Ù…Ù†ÛŒØªÛŒ
security-alerts:
  enable: true
  webhook: "https://api.telegram.org/botYOUR_BOT_TOKEN/sendMessage"
  threshold: 3

# Ù„Ø§ÛŒÙ‡ Û±Û°: Ø§Ø³Ú©Ø±ÛŒÙ¾Øª ØªÙ‚ÙˆÛŒØªâ€ŒÚ©Ù†Ù†Ø¯Ù‡ (Ø¨Ø±Ø§ÛŒ Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ø±ÙˆØª Ø´Ø¯Ù‡)
boost-script: |
  #!/system/bin/sh
  # Iran Network Turbo Boost Script
  # Usage: sh iran_boost.sh

  # Ù¾Ø§Ú©â€ŒØ³Ø§Ø²ÛŒ Ù‚ÙˆØ§Ù†ÛŒÙ† ÙØ§ÛŒØ±ÙˆØ§Ù„
  iptables -F
  iptables -t nat -F
  iptables -t mangle -F
  ip6tables -F
  ip6tables -t nat -F

  # Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ÛŒ Ø´Ø¨Ú©Ù‡
  sysctl -w net.ipv4.tcp_fastopen=3
  sysctl -w net.ipv4.tcp_window_scaling=1
  sysctl -w net.ipv4.tcp_tw_reuse=1
  sysctl -w net.ipv4.tcp_sack=1
  sysctl -w net.core.rmem_max=2500000
  sysctl -w net.core.wmem_max=2500000
  sysctl -w net.core.netdev_max_backlog=10000
  sysctl -w net.ipv4.tcp_max_syn_backlog=30000

  # ØºÛŒØ±ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ IPv6 (Ù…ÙˆÙ‚Øª)
  for i in $(ip -o link show | awk -F': ' '{print $2}'); do
    sysctl -w net.ipv6.conf.$i.disable_ipv6=1
  done

  # Ø§ÙØ²Ø§ÛŒØ´ Ø§ÙˆÙ„ÙˆÛŒØª ØªØ±Ø§ÙÛŒÚ© VPN
  tc qdisc add dev tun0 root sfq perturb 10
  tc qdisc add dev wlan0 root sfq

  # ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ TCP BBR (Ø§Ú¯Ø± Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø´ÙˆØ¯)
  if grep -q "bbr" /proc/sys/net/ipv4/tcp_available_congestion_control; then
    echo "bbr" > /proc/sys/net/ipv4/tcp_congestion_control
  fi

  # Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ú©Ø§Ù‡Ø´ Ø³Ø±Ø¹Øª VPN
  echo "0" > /proc/sys/net/ipv4/tcp_slow_start_after_idle

  # Ú©Ø§Ù‡Ø´ Ø²Ù…Ø§Ù†â€ŒÙ‡Ø§ÛŒ Ù†Ú¯Ù‡â€ŒØ¯Ø§Ø±ÛŒ TCP
  echo "30" > /proc/sys/net/ipv4/tcp_fin_timeout
  echo "5" > /proc/sys/net/ipv4/tcp_keepalive_probes
  echo "15" > /proc/sys/net/ipv4/tcp_keepalive_intvl

  # ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ MTU Probe
  echo "1" > /proc/sys/net/ipv4/tcp_mtu_probing

  # Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¨Ø±Ø§ÛŒ Ø´Ø¨Ú©Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨Ø§ ØªØ§Ø®ÛŒØ± Ø¨Ø§Ù„Ø§
  echo "1" > /proc/sys/net/ipv4/tcp_low_latency

  # Ø§Ø¹Ù…Ø§Ù„ ØªÙ†Ø¸ÛŒÙ…Ø§Øª DNS Ø§Ø¶Ø·Ø±Ø§Ø±ÛŒ
  setprop net.dns1 1.1.1.1
  setprop net.dns2 8.8.8.8

  # Ø«Ø¨Øª Ø±ÙˆÛŒØ¯Ø§Ø¯
  echo "[$(date)] Boost applied" > /data/local/tmp/iran_boost.log
